# FHIR Operator Configuration for Form Auto-Population Service
# Migrated from healthcare-events service subscription configuration

environments:
  default:
    subscriptionTopics:
      # Patient events for form population
      - name: patient-updated
        description: 'Patient resource changes for form auto-population'
        resourceType: Patient
        criteria:
          - 'Patient?_type=Patient'
        eventTypes:
          - create
          - update
        destinations:
          - type: kafka
            brokers:
              - '${KAFKA_BOOTSTRAP_SERVERS:-localhost:9094}'
            topic: '${PATIENT_KAFKA_TOPIC:-form.population.requested}'
            config:
              acks: all
              retries: 3

      # Questionnaire events for form validation
      - name: questionnaire-created
        description: 'New questionnaire resources for validation'
        resourceType: Questionnaire
        criteria:
          - 'Questionnaire?_type=Questionnaire'
        eventTypes:
          - create
        destinations:
          - type: kafka
            brokers:
              - '${KAFKA_BOOTSTRAP_SERVERS:-localhost:9094}'
            topic: '${QUESTIONNAIRE_KAFKA_TOPIC:-form.validation.requested}'
            config:
              acks: all
              retries: 3

      # QuestionnaireResponse events for form completion
      - name: form-populated
        description: 'QuestionnaireResponse changes for form completion tracking'
        resourceType: QuestionnaireResponse
        criteria:
          - 'QuestionnaireResponse?_type=QuestionnaireResponse'
        eventTypes:
          - create
          - update
        destinations:
          - type: kafka
            brokers:
              - '${KAFKA_BOOTSTRAP_SERVERS:-localhost:9094}'
            topic: '${RESPONSE_KAFKA_TOPIC:-form.populated}'
            config:
              acks: all
              retries: 3

  development:
    subscriptionTopics:
      # Development-specific configuration can be added here
      # Currently inheriting from default

  production:
    subscriptionTopics:
      # Production-specific overrides can be added here
      # Currently inheriting from default
