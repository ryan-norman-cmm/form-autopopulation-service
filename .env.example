# ==============================================
# FORM AUTO-POPULATION SERVICE - ENVIRONMENT VARIABLES
# ==============================================
# Single environment file for the form auto-population infrastructure stack.
# Docker Compose overrides networking as needed for containerized services.
#
# QUICK START:
# 1. Copy this file to .env: cp .env.example .env
# 2. Get Aidbox license key (see instructions below)
# 3. Start infrastructure: docker compose up -d
# 4. Start service locally: npx nx serve form-auto-population-service
#
# All database passwords are development-ready defaults.

# ==============================================
# DEVELOPMENT ENVIRONMENT
# ==============================================
NODE_ENV=development

# ==============================================
# APPLICATION PORT
# ==============================================
PORT=3000

# ==============================================
# KAFKA MESSAGE BROKER
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
KAFKA_BOOTSTRAP_SERVERS=localhost:9094
KAFKA_CLIENT_ID=form-population-service
KAFKA_BROKERS=localhost:9094
KAFKA_PORT=9093
KAFKA_EXTERNAL_PORT=9094
ZOOKEEPER_PORT=2182

# Kafka Connection Settings
KAFKA_CONNECTION_TIMEOUT=30000
KAFKA_REQUEST_TIMEOUT=30000

# Kafka Topics
FORM_POPULATION_COMPLETED_TOPIC=form.population.completed
FORM_VALIDATION_REQUESTED_TOPIC=form.validation.requested

# ==============================================
# FORM AUTO-POPULATION DATABASE
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
FORMS_DB_HOST=localhost
FORMS_DB_PORT=5435
FORMS_DB_USERNAME=forms_user
FORMS_DB_PASSWORD=forms_password
FORMS_DB_NAME=forms_db

# Legacy aliases for backward compatibility
DATABASE_URL=postgresql://forms_user:forms_password@localhost:5435/forms_db

# ==============================================
# AIDBOX FHIR SERVER CONFIGURATION
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
AIDBOX_URL=http://localhost:8081
AIDBOX_PORT=8081
AIDBOX_ADMIN_PASSWORD=admin
AIDBOX_CLIENT_ID=root
AIDBOX_CLIENT_SECRET=97QvlvxWLx

# REQUIRED: Get free development license (100-year validity)
# 1. Sign up at: https://aidbox.app/ui/portal#/signup
# 2. Verify email and complete profile
# 3. Go to Licenses → New license → Dev → Self-Hosted → Create
# 4. Copy the license key and paste below
AIDBOX_LICENSE_KEY=your_aidbox_dev_license_key_here

# FHIR Client Configuration
FHIR_SERVER_URL=http://localhost:8081/fhir
FHIR_CLIENT_ID=root
FHIR_CLIENT_SECRET=97QvlvxWLx

# ==============================================
# AIDBOX DATABASE CONFIGURATION
# ==============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5434
POSTGRES_DB=aidbox
POSTGRES_USER=aidbox
POSTGRES_PASSWORD=qawcX9QCjB

# ==============================================
# PGADMIN CONFIGURATION
# ==============================================
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ==============================================
# KAFDROP KAFKA UI
# ==============================================
KAFDROP_PORT=19001

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_FORM_VALIDATION=true
FEATURE_AUTO_POPULATION=true
FEATURE_PATIENT_DATA_INTEGRATION=true

# ==============================================
# CORS CONFIGURATION
# ==============================================
# Allowed origins for cross-origin requests (comma-separated)
CORS_ORIGIN=http://localhost:3000,http://localhost:4200