# ==============================================
# FORM AUTO-POPULATION SERVICE - ENVIRONMENT VARIABLES
# ==============================================
# Single environment file for the form auto-population infrastructure stack.
# Docker Compose overrides networking as needed for containerized services.
#
# QUICK START:
# 1. Run initialization script: ./scripts/init.sh
#    (This handles license acquisition, .env generation, and native FHIR seeding)
# 2. Start service locally: npx nx serve form-auto-population-service
#
# OR for manual setup:
# 1. Run: ./scripts/init.sh (choose manual option)
# 2. Start infrastructure: docker compose up -d
# 3. Start service locally: npx nx serve form-auto-population-service
#
# All database passwords are development-ready defaults.

# ==============================================
# DEVELOPMENT ENVIRONMENT
# ==============================================
NODE_ENV=development

# ==============================================
# APPLICATION PORT
# ==============================================
PORT=3000

# ==============================================
# KAFKA MESSAGE BROKER
# ==============================================
# External access (for clients outside Docker)
KAFKA_EXTERNAL_HOST=localhost
KAFKA_EXTERNAL_PORT=9094

# Internal access (for Docker services)
KAFKA_INTERNAL_HOST=kafka
KAFKA_INTERNAL_PORT=9092

# Client configuration
KAFKA_CLIENT_ID=form-population-service
KAFKA_CONNECTION_TIMEOUT=30000
KAFKA_REQUEST_TIMEOUT=30000

# Topics
FORM_POPULATION_COMPLETED_TOPIC=form.population.completed

# Zookeeper
ZOOKEEPER_PORT=2182

# ==============================================
# AIDBOX FHIR SERVER CONFIGURATION
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
AIDBOX_URL=http://localhost:8081
AIDBOX_PORT=8081
AIDBOX_ADMIN_PASSWORD=admin
AIDBOX_CLIENT_ID=root
AIDBOX_CLIENT_SECRET=your_aidbox_client_secret_here

# REQUIRED: Aidbox development license (free, 100-year validity)
# This will be automatically populated when you run ./scripts/init.sh
# The script will open the signup page and guide you through license acquisition
AIDBOX_LICENSE_KEY=your_aidbox_dev_license_key_here

# Form Auto-Population Client Configuration
FHIR_SERVER_URL=http://localhost:8081/fhir
FORM_AUTOPOPULATION_CLIENT_ID=form-auto-population-service
FORM_AUTOPOPULATION_CLIENT_SECRET=your_form_autopopulation_client_secret_here

# ==============================================
# AIDBOX DATABASE CONFIGURATION
# ==============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5434
POSTGRES_DB=aidbox
POSTGRES_USER=aidbox
POSTGRES_PASSWORD=your_postgres_password_here

# ==============================================
# KAFDROP KAFKA UI
# ==============================================
KAFDROP_PORT=19001

# ==============================================
# CORS CONFIGURATION
# ==============================================
# Allowed origins for cross-origin requests (comma-separated)
CORS_ORIGIN=http://localhost:3000,http://localhost:4200
