# ==============================================
# FORM AUTO-POPULATION SERVICE - ENVIRONMENT VARIABLES
# ==============================================
# Single environment file for the form auto-population infrastructure stack.
# Docker Compose overrides networking as needed for containerized services.
#
# QUICK START:
# 1. Run initialization script: ./scripts/init.sh
# 2. Get Aidbox license key (see instructions below) and update .env
# 3. Start infrastructure: docker compose up -d
# 4. Seed FHIR resources: ./scripts/seed-fhir-resources.sh
# 5. Start service locally: npx nx serve form-auto-population-service
#
# All database passwords are development-ready defaults.

# ==============================================
# DEVELOPMENT ENVIRONMENT
# ==============================================
NODE_ENV=development

# ==============================================
# APPLICATION PORT
# ==============================================
PORT=3000

# ==============================================
# KAFKA MESSAGE BROKER
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
KAFKA_BOOTSTRAP_SERVERS=localhost:9094
KAFKA_CLIENT_ID=form-population-service
KAFKA_BROKERS=localhost:9094
KAFKA_PORT=9093
KAFKA_EXTERNAL_PORT=9094
ZOOKEEPER_PORT=2182

# Kafka Connection Settings
KAFKA_CONNECTION_TIMEOUT=30000
KAFKA_REQUEST_TIMEOUT=30000

# Kafka Topics
FORM_POPULATION_COMPLETED_TOPIC=form.population.completed
FORM_VALIDATION_REQUESTED_TOPIC=form.validation.requested

# ==============================================
# FORM AUTO-POPULATION DATABASE
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
FORMS_DB_HOST=localhost
FORMS_DB_PORT=5435
FORMS_DB_USERNAME=forms_user
FORMS_DB_PASSWORD=your_forms_password_here
FORMS_DB_NAME=forms_db

# Legacy aliases for backward compatibility
DATABASE_URL=postgresql://forms_user:your_forms_password@localhost:5435/forms_db

# ==============================================
# AIDBOX FHIR SERVER CONFIGURATION
# ==============================================
# Default to localhost (external access) - Docker Compose overrides for containers
AIDBOX_URL=http://localhost:8081
AIDBOX_PORT=8081
AIDBOX_ADMIN_PASSWORD=admin
AIDBOX_CLIENT_ID=root
AIDBOX_CLIENT_SECRET=your_aidbox_client_secret_here

# REQUIRED: Aidbox development license (free, 100-year validity)
# This will be automatically populated when you run ./scripts/init.sh
# The script will open the signup page and guide you through license acquisition
AIDBOX_LICENSE_KEY=your_aidbox_dev_license_key_here

# Form Auto-Population Client Configuration
FHIR_SERVER_URL=http://localhost:8081/fhir
FORM_AUTOPOPULATION_CLIENT_ID=form-auto-population-service
FORM_AUTOPOPULATION_CLIENT_SECRET=your_form_autopopulation_client_secret_here

# ==============================================
# AIDBOX DATABASE CONFIGURATION
# ==============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5434
POSTGRES_DB=aidbox
POSTGRES_USER=aidbox
POSTGRES_PASSWORD=your_postgres_password_here

# ==============================================
# PGADMIN CONFIGURATION
# ==============================================
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ==============================================
# KAFDROP KAFKA UI
# ==============================================
KAFDROP_PORT=19001

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_FORM_VALIDATION=true
FEATURE_AUTO_POPULATION=true
FEATURE_PATIENT_DATA_INTEGRATION=true

# ==============================================
# CORS CONFIGURATION
# ==============================================
# Allowed origins for cross-origin requests (comma-separated)
CORS_ORIGIN=http://localhost:3000,http://localhost:4200