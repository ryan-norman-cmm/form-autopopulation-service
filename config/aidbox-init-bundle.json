{
  "resourceType": "Bundle",
  "id": "form-auto-population-init-bundle",
  "type": "transaction",
  "entry": [
    {
      "request": {
        "method": "PUT",
        "url": "Client/form-auto-population-service"
      },
      "resource": {
        "resourceType": "Client",
        "id": "form-auto-population-service",
        "secret": "{{FORM_AUTOPOPULATION_CLIENT_SECRET}}",
        "grant_types": ["client_credentials"],
        "scope": [
          "system/Patient.read",
          "system/Questionnaire.*",
          "system/QuestionnaireResponse.*"
        ]
      }
    },
    {
      "request": {
        "method": "PUT",
        "url": "AccessPolicy/questionnaire-access-policy"
      },
      "resource": {
        "resourceType": "AccessPolicy",
        "id": "questionnaire-access-policy",
        "description": "Allow form-auto-population-service to access Questionnaire resources",
        "engine": "sql",
        "sql": {
          "query": "SELECT true WHERE request.params.resource/type = 'Questionnaire'"
        },
        "link": [
          {
            "resourceType": "Client",
            "id": "form-auto-population-service"
          }
        ]
      }
    },
    {
      "request": {
        "method": "PUT",
        "url": "AccessPolicy/questionnaireresponse-access-policy"
      },
      "resource": {
        "resourceType": "AccessPolicy",
        "id": "questionnaireresponse-access-policy",
        "description": "Allow form-auto-population-service to access QuestionnaireResponse resources",
        "engine": "sql",
        "sql": {
          "query": "SELECT true WHERE request.params.resource/type = 'QuestionnaireResponse'"
        },
        "link": [
          {
            "resourceType": "Client",
            "id": "form-auto-population-service"
          }
        ]
      }
    }
  ]
}
